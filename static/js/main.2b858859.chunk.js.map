{"version":3,"sources":["components/TodoEditor/TodoEditor.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/TodoEditor/TodoEditor.js","components/DraggableList/DraggableList.js","components/Container/Container.js","components/Modal/Modal.js","App.js","index.js","components/DraggableList/DraggableList.module.css"],"names":["module","exports","TodoEditor","onSubmit","useState","message","setMessage","className","s","e","autoFocus","textarea","value","onChange","currentTarget","type","button","aria-label","fn","order","down","originalIndex","curIndex","y","index","scale","zIndex","shadow","immediate","n","indexOf","DraggableList","todos","onToggleCompleted","onDeleteTodo","items","map","item","text","useRef","_","useSprings","length","current","springs","setSprings","bind","useGesture","args","delta","curRow","clamp","Math","round","newOrder","swap","useEffect","content","style","height","i","div","key","boxShadow","interpolate","transform","children","completed","buttonDone","onClick","id","buttonDelete","Container","container","modalRoot","document","querySelector","Modal","onClose","handleKeyDown","code","window","addEventListener","removeEventListener","createPortal","backdrop","event","target","App","initialTodos","setTodos","showModal","setShowModal","localStorage","getItem","parsedTodos","JSON","parse","setItem","stringify","toggleModal","todoId","console","log","filter","todo","shortid","generate","ReactDOM","render","StrictMode","getElementById"],"mappings":"4GACAA,EAAOC,QAAU,CAAC,WAAa,+BAA+B,SAAW,6BAA6B,OAAS,6B,mBCA/GD,EAAOC,QAAU,CAAC,SAAW,wBAAwB,QAAU,yB,mBCA/DD,EAAOC,QAAU,CAAC,UAAY,+B,6yCC4BfC,MAzBf,YAAmC,IAAbC,EAAY,EAAZA,SAAY,EACFC,mBAAS,IADP,mBACzBC,EADyB,KAChBC,EADgB,KAShC,OACE,uBAAMC,UAAWC,IAAEN,WAAYC,SAPZ,SAAAM,GAEnBN,EAASE,GACTC,EAAW,KAIX,UACE,0BACEI,WAAS,EACTH,UAAWC,IAAEG,SACbC,MAAOP,EACPQ,SAAU,SAAAJ,GAAC,OAAIH,EAAWG,EAAEK,cAAcF,UAG5C,wBAAQG,KAAK,SAASR,UAAWC,IAAEQ,OAAQC,aAAW,OAAtD,SACE,cAAC,IAAD,U,iECZFC,EAAK,SAACC,EAAOC,EAAMC,EAAeC,EAAUC,GAAvC,OAA6C,SAAAC,GAAK,OAC3DJ,GAAQI,IAAUH,EACd,CACEE,EAAc,IAAXD,EAAiBC,EACpBE,MAAO,IACPC,OAAQ,IACRC,OAAQ,GACRC,UAAW,SAAAC,GAAC,MAAU,MAANA,GAAmB,WAANA,IAE/B,CACEN,EAA0B,IAAvBJ,EAAMW,QAAQN,GACjBC,MAAO,EACPC,OAAQ,IACRC,OAAQ,EACRC,WAAW,KAGJ,SAASG,EAAT,GAIX,IAHFC,EAGC,EAHDA,MACAC,EAEC,EAFDA,kBACAC,EACC,EADDA,aAEMC,EAAQH,EAAMI,KAAI,SAAAC,GAAI,OAAIA,EAAKC,QAE/BnB,EAAQoB,iBAAOJ,EAAMC,KAAI,SAACI,EAAGhB,GAAJ,OAAcA,MAH5C,EAI6BiB,YAAWN,EAAMO,OAAQxB,EAAGC,EAAMwB,UAJ/D,mBAIMC,EAJN,KAIeC,EAJf,KAKKC,EAAOC,aAAW,YAAoD,IAA1C1B,EAAyC,cAAhD2B,KAAgD,MAAzB5B,EAAyB,EAAzBA,KAAgBG,EAAS,cAAnB0B,MAAmB,MACnE3B,EAAWH,EAAMwB,QAAQb,QAAQT,GACjC6B,EAASC,YACbC,KAAKC,OAAkB,IAAX/B,EAAiBC,GAAK,KAClC,EACAY,EAAMO,OAAS,GAEXY,EAAWC,IAAKpC,EAAMwB,QAASrB,EAAU4B,GAE/CL,EAAW3B,EAAGoC,EAAUlC,EAAMC,EAAeC,EAAUC,IAClDH,IAAMD,EAAMwB,QAAUW,MAO7B,OAJAE,qBAAU,WACRrC,EAAMwB,QAAN,sBAAoBxB,EAAMwB,SAA1B,CAAmCxB,EAAMwB,QAAQD,WAChD,CAACV,IAGF,qBAAKzB,UAAWC,IAAEiD,QAASC,MAAO,CAAEC,OAAuB,IAAfxB,EAAMO,QAAlD,SACGE,EAAQR,KAAI,WAA+BwB,GAA/B,IAAGlC,EAAH,EAAGA,OAAQC,EAAX,EAAWA,OAAQJ,EAAnB,EAAmBA,EAAGE,EAAtB,EAAsBA,MAAtB,OACX,qBAAKlB,UAAWC,IAAE6B,KAAlB,SACE,wBAAC,IAASwB,IAAV,2BACMf,EAAKc,IADX,IAEEE,IAAKF,EACLF,MAAO,CACLhC,SACAqC,UAAWpC,EAAOqC,aAChB,SAAAxD,GAAC,wCAA+BA,EAA/B,cAAsC,EAAIA,EAA1C,aAEHyD,UAAWD,YACT,CAACzC,EAAGE,IACJ,SAACF,EAAGf,GAAJ,8BAA2Be,EAA3B,uBAA2Cf,EAA3C,SAGJ0D,SACE,qCACE,mBAAG3D,UAAWyB,EAAM4B,GAAGO,UAAY,OAAS,KAA5C,SAAmDhC,EAAMyB,KACzD,wBACErD,UAAWC,IAAE4D,WACbC,QAAS,kBAAMpC,EAAkBD,EAAM4B,GAAGU,KAC1CrD,aAAW,YAHb,SAKGe,EAAM4B,GAAGO,UACR,cAAC,IAAD,IAEA,cAAC,IAAD,MAGJ,wBACE5D,UAAWC,IAAE+D,aACbF,QAAS,kBAAMnC,EAAaF,EAAM4B,GAAGU,KACrCrD,aAAW,cAHb,SAKE,cAAC,IAAD,mB,qBCnFHuD,EAJG,SAAC,GAAD,IAAGN,EAAH,EAAGA,SAAH,OAChB,qBAAK3D,UAAWC,IAAEiE,UAAlB,SAA8BP,K,iBCA1BQ,EAAYC,SAASC,cAAc,eAE1B,SAASC,EAAT,GAAuC,IAAtBC,EAAqB,EAArBA,QAASZ,EAAY,EAAZA,SACjCa,EAAgB,SAAAtE,GACL,WAAXA,EAAEuE,MACJF,KAIJtB,qBAAU,WAER,OADAyB,OAAOC,iBAAiB,UAAWH,GAC5BE,OAAOE,oBAAoB,UAAWJ,MAS/C,OAAOK,uBACL,qBAAK7E,UAAWC,IAAE6E,SAAUhB,QAPF,SAAAiB,GACtBA,EAAMxE,gBAAkBwE,EAAMC,QAChCT,KAKF,SACE,qBAAKvE,UAAWC,IAAEiD,QAAlB,SAA4BS,MAE9BQ,G,kBCuDWc,MAzEf,WAAgB,IAAD,EACapF,mBAASqF,GADtB,mBACNzD,EADM,KACC0D,EADD,OAEqBtF,oBAAS,GAF9B,mBAENuF,EAFM,KAEKC,EAFL,KAIbpC,qBAAU,WACR,IAAMxB,EAAQ6D,aAAaC,QAAQ,SAC7BC,EAAcC,KAAKC,MAAMjE,GAE3B+D,GACFL,EAASK,KAEV,IAEHvC,qBAAU,WACRqC,aAAaK,QAAQ,QAASF,KAAKG,UAAUnE,MAC5C,CAACA,IAEJ,IAyBMoE,EAAc,WAClBR,GAAcD,IAGhB,OACE,qCACE,sBAAKpF,UAAU,OAAf,UACE,oBAAIA,UAAU,QAAd,mBAEA,cAAC,IAAD,CACEA,UAAU,MACV8D,QAAS+B,EACTnF,aAAW,gBAGf,eAAC,EAAD,WACE,cAACc,EAAD,CACEC,MAAOA,EACPE,aA/BW,SAAAmE,GACjBC,QAAQC,IAAIF,GACZX,EAAS1D,EAAMwE,QAAO,SAAAC,GAAI,OAAIA,EAAKnC,KAAO+B,OA8BpCpE,kBA3BgB,SAAAoE,GACtBX,EACE1D,EAAMI,KAAI,SAAAqE,GAAI,OACZA,EAAKnC,KAAO+B,EAAZ,2BAA0BI,GAA1B,IAAgCtC,WAAYsC,EAAKtC,YAAcsC,SA0B9Dd,GACC,cAACd,EAAD,CAAOC,QAASsB,EAAhB,SACE,cAAC,EAAD,CAAYjG,SAhDN,SAAAmC,GACd,GAAIA,EAAM,CACR,IAAMmE,EAAO,CACXnC,GAAIoC,IAAQC,WACZrE,OACA6B,WAAW,GAEbuB,EAAS,CAACe,GAAF,mBAAWzE,KAErBoE,gB,MC/BJQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFnC,SAASoC,eAAe,U,kBCR1B/G,EAAOC,QAAU,CAAC,QAAU,+BAA+B,KAAO,4BAA4B,aAAe,oCAAoC,WAAa,qC","file":"static/js/main.2b858859.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"TodoEditor\":\"TodoEditor_TodoEditor__5QU9p\",\"textarea\":\"TodoEditor_textarea__JdhMt\",\"button\":\"TodoEditor_button__3l-Sd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__1wuQF\",\"content\":\"Modal_content__QAhEA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3g3FW\"};","import { useState } from 'react';\nimport { MdDone, MdClose } from 'react-icons/md';\nimport s from './TodoEditor.module.css';\n\nfunction TodoEditor({ onSubmit }) {\n  const [message, setMessage] = useState('');\n\n  const handleSubmit = e => {\n    // e.preventDefault();\n    onSubmit(message);\n    setMessage('');\n  };\n\n  return (\n    <form className={s.TodoEditor} onSubmit={handleSubmit}>\n      <textarea\n        autoFocus\n        className={s.textarea}\n        value={message}\n        onChange={e => setMessage(e.currentTarget.value)}\n      ></textarea>\n\n      <button type=\"submit\" className={s.button} aria-label=\"save\">\n        <MdDone />\n      </button>\n    </form>\n  );\n}\n\nexport default TodoEditor;\n","import React, { useRef, useEffect } from 'react';\nimport clamp from 'lodash-es/clamp';\nimport swap from 'lodash-move';\nimport { useGesture } from 'react-use-gesture';\nimport { useSprings, animated, interpolate } from 'react-spring';\nimport { RiDeleteBack2Line } from 'react-icons/ri';\nimport { BsArrowCounterclockwise } from 'react-icons/bs';\nimport { MdDone } from 'react-icons/md';\nimport s from './DraggableList.module.css';\n\n// Returns fitting styles for dragged/idle items\nconst fn = (order, down, originalIndex, curIndex, y) => index =>\n  down && index === originalIndex\n    ? {\n        y: curIndex * 100 + y,\n        scale: 1.1,\n        zIndex: '1',\n        shadow: 15,\n        immediate: n => n === 'y' || n === 'zIndex',\n      }\n    : {\n        y: order.indexOf(index) * 100,\n        scale: 1,\n        zIndex: '0',\n        shadow: 1,\n        immediate: false,\n      };\n\nexport default function DraggableList({\n  todos,\n  onToggleCompleted,\n  onDeleteTodo,\n}) {\n  const items = todos.map(item => item.text);\n\n  const order = useRef(items.map((_, index) => index)); // Store indicies as a local ref, this represents the item order\n  const [springs, setSprings] = useSprings(items.length, fn(order.current)); // Create springs, each corresponds to an item, controlling its transform, scale, etc.\n  const bind = useGesture(({ args: [originalIndex], down, delta: [, y] }) => {\n    const curIndex = order.current.indexOf(originalIndex);\n    const curRow = clamp(\n      Math.round((curIndex * 100 + y) / 100),\n      0,\n      items.length - 1,\n    );\n    const newOrder = swap(order.current, curIndex, curRow);\n\n    setSprings(fn(newOrder, down, originalIndex, curIndex, y)); // Feed springs new style data, they'll animate the view without causing a single render\n    if (!down) order.current = newOrder;\n  });\n\n  useEffect(() => {\n    order.current = [...order.current, order.current.length];\n  }, [todos]);\n\n  return (\n    <div className={s.content} style={{ height: items.length * 100 }}>\n      {springs.map(({ zIndex, shadow, y, scale }, i) => (\n        <div className={s.item}>\n          <animated.div\n            {...bind(i)}\n            key={i}\n            style={{\n              zIndex,\n              boxShadow: shadow.interpolate(\n                s => `rgba(0, 0, 0, 0.15) 0px ${s}px ${2 * s}px 0px`,\n              ),\n              transform: interpolate(\n                [y, scale],\n                (y, s) => `translate3d(0,${y}px,0) scale(${s})`,\n              ),\n            }}\n            children={\n              <>\n                <p className={todos[i].completed ? 'done' : null}>{items[i]}</p>\n                <button\n                  className={s.buttonDone}\n                  onClick={() => onToggleCompleted(todos[i].id)}\n                  aria-label=\"todo done\"\n                >\n                  {todos[i].completed ? (\n                    <BsArrowCounterclockwise />\n                  ) : (\n                    <MdDone />\n                  )}\n                </button>\n                <button\n                  className={s.buttonDelete}\n                  onClick={() => onDeleteTodo(todos[i].id)}\n                  aria-label=\"todo delete\"\n                >\n                  <RiDeleteBack2Line />\n                </button>\n              </>\n            }\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n","import React from 'react';\nimport s from './Container.module.css';\n\nconst Container = ({ children }) => (\n  <div className={s.container}>{children}</div>\n);\n\nexport default Container;\n","import { createPortal } from 'react-dom';\nimport { useState, useEffect } from 'react';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function Modal({ onClose, children }) {\n  const handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return window.removeEventListener('keydown', handleKeyDown);\n  });\n\n  const handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className={s.backdrop} onClick={handleBackdropClick}>\n      <div className={s.content}>{children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n","import { useState, useEffect } from 'react';\nimport shortid from 'shortid';\nimport { RiAddCircleLine } from 'react-icons/ri';\nimport TodoEditor from './components/TodoEditor';\nimport DraggableList from './components/DraggableList';\nimport Container from './components/Container';\nimport Modal from './components/Modal';\nimport initialTodos from './todos.json';\nimport './App.css';\n\nfunction App() {\n  const [todos, setTodos] = useState(initialTodos);\n  const [showModal, setShowModal] = useState(false);\n\n  useEffect(() => {\n    const todos = localStorage.getItem('todos');\n    const parsedTodos = JSON.parse(todos);\n\n    if (parsedTodos) {\n      setTodos(parsedTodos);\n    }\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('todos', JSON.stringify(todos));\n  }, [todos]);\n\n  const addTodo = text => {\n    if (text) {\n      const todo = {\n        id: shortid.generate(),\n        text,\n        completed: false,\n      };\n      setTodos([todo, ...todos]);\n    }\n    toggleModal();\n  };\n\n  const deleteTodo = todoId => {\n    console.log(todoId);\n    setTodos(todos.filter(todo => todo.id !== todoId));\n  };\n\n  const toggleCompleted = todoId => {\n    setTodos(\n      todos.map(todo =>\n        todo.id === todoId ? { ...todo, completed: !todo.completed } : todo,\n      ),\n    );\n  };\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  return (\n    <>\n      <div className=\"head\">\n        <h1 className=\"title\">TODOS</h1>\n\n        <RiAddCircleLine\n          className=\"add\"\n          onClick={toggleModal}\n          aria-label=\"add todo\"\n        />\n      </div>\n      <Container>\n        <DraggableList\n          todos={todos}\n          onDeleteTodo={deleteTodo}\n          onToggleCompleted={toggleCompleted}\n        />\n        {showModal && (\n          <Modal onClose={toggleModal}>\n            <TodoEditor onSubmit={addTodo} />\n          </Modal>\n        )}\n      </Container>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// const elem1 = <span>Привет</span>;\n// const elem2 = <span>мир</span>;\n\n// const element = (\n//   <div>\n//     {elem1}\n//     {elem2}\n//   </div>\n// );\n// console.log(element);\n\n// ReactDOM.render(element, document.querySelector(\"#root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"DraggableList_content__R6iQF\",\"item\":\"DraggableList_item__1OEHW\",\"buttonDelete\":\"DraggableList_buttonDelete__Us7M8\",\"buttonDone\":\"DraggableList_buttonDone__4ko6T\"};"],"sourceRoot":""}