{"version":3,"sources":["components/TodoEditor/TodoEditor.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/TodoEditor/TodoEditor.js","components/DraggableList/DraggableList.js","components/Container/Container.js","components/Modal/Modal.js","App.js","index.js","components/DraggableList/DraggableList.module.css"],"names":["module","exports","TodoEditor","onSubmit","useState","message","setMessage","className","s","e","autoFocus","textarea","value","onChange","currentTarget","type","button","aria-label","fn","order","down","originalIndex","curIndex","y","index","scale","zIndex","shadow","immediate","n","indexOf","DraggableList","todos","onToggleCompleted","onDeleteTodo","items","map","item","text","useRef","_","useSprings","length","current","springs","setSprings","bind","useGesture","args","delta","curRow","clamp","Math","round","newOrder","swap","useEffect","content","style","height","i","div","key","boxShadow","interpolate","transform","children","completed","buttonDone","onClick","id","buttonDelete","Container","container","modalRoot","document","querySelector","Modal","onClose","handleKeyDown","code","window","addEventListener","removeEventListener","createPortal","backdrop","event","target","App","initialTodos","setTodos","showModal","setShowModal","localStorage","getItem","parsedTodos","JSON","parse","setItem","stringify","toggleModal","todoId","console","log","filter","todo","shortid","generate","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fd0b128e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"TodoEditor\":\"TodoEditor_TodoEditor__5QU9p\",\"textarea\":\"TodoEditor_textarea__JdhMt\",\"button\":\"TodoEditor_button__3l-Sd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__1wuQF\",\"content\":\"Modal_content__QAhEA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3g3FW\"};","import { useState } from 'react';\r\nimport { MdDone, MdClose } from 'react-icons/md';\r\nimport s from './TodoEditor.module.css';\r\n\r\nfunction TodoEditor({ onSubmit }) {\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleSubmit = e => {\r\n    // e.preventDefault();\r\n    onSubmit(message);\r\n    setMessage('');\r\n  };\r\n\r\n  return (\r\n    <form className={s.TodoEditor} onSubmit={handleSubmit}>\r\n      <textarea\r\n        autoFocus\r\n        className={s.textarea}\r\n        value={message}\r\n        onChange={e => setMessage(e.currentTarget.value)}\r\n      ></textarea>\r\n\r\n      <button type=\"submit\" className={s.button} aria-label=\"save\">\r\n        <MdDone />\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default TodoEditor;\r\n","import React, { useRef, useEffect } from 'react';\r\nimport clamp from 'lodash-es/clamp';\r\nimport swap from 'lodash-move';\r\nimport { useGesture } from 'react-use-gesture';\r\nimport { useSprings, animated, interpolate } from 'react-spring';\r\nimport { RiDeleteBack2Line } from 'react-icons/ri';\r\nimport { BsArrowCounterclockwise } from 'react-icons/bs';\r\nimport { MdDone } from 'react-icons/md';\r\nimport s from './DraggableList.module.css';\r\n\r\n// Returns fitting styles for dragged/idle items\r\nconst fn = (order, down, originalIndex, curIndex, y) => index =>\r\n  down && index === originalIndex\r\n    ? {\r\n        y: curIndex * 100 + y,\r\n        scale: 1.1,\r\n        zIndex: '1',\r\n        shadow: 15,\r\n        immediate: n => n === 'y' || n === 'zIndex',\r\n      }\r\n    : {\r\n        y: order.indexOf(index) * 100,\r\n        scale: 1,\r\n        zIndex: '0',\r\n        shadow: 1,\r\n        immediate: false,\r\n      };\r\n\r\nexport default function DraggableList({\r\n  todos,\r\n  onToggleCompleted,\r\n  onDeleteTodo,\r\n}) {\r\n  const items = todos.map(item => item.text);\r\n\r\n  const order = useRef(items.map((_, index) => index)); // Store indicies as a local ref, this represents the item order\r\n  const [springs, setSprings] = useSprings(items.length, fn(order.current)); // Create springs, each corresponds to an item, controlling its transform, scale, etc.\r\n  const bind = useGesture(({ args: [originalIndex], down, delta: [, y] }) => {\r\n    const curIndex = order.current.indexOf(originalIndex);\r\n    const curRow = clamp(\r\n      Math.round((curIndex * 100 + y) / 100),\r\n      0,\r\n      items.length - 1,\r\n    );\r\n    const newOrder = swap(order.current, curIndex, curRow);\r\n\r\n    setSprings(fn(newOrder, down, originalIndex, curIndex, y)); // Feed springs new style data, they'll animate the view without causing a single render\r\n    if (!down) order.current = newOrder;\r\n  });\r\n\r\n  useEffect(() => {\r\n    order.current = [...order.current, order.current.length];\r\n  }, [todos]);\r\n\r\n  return (\r\n    <div className={s.content} style={{ height: items.length * 100 }}>\r\n      {springs.map(({ zIndex, shadow, y, scale }, i) => (\r\n        <div className={s.item}>\r\n          <animated.div\r\n            {...bind(i)}\r\n            key={i}\r\n            style={{\r\n              zIndex,\r\n              boxShadow: shadow.interpolate(\r\n                s => `rgba(0, 0, 0, 0.15) 0px ${s}px ${2 * s}px 0px`,\r\n              ),\r\n              transform: interpolate(\r\n                [y, scale],\r\n                (y, s) => `translate3d(0,${y}px,0) scale(${s})`,\r\n              ),\r\n            }}\r\n            children={\r\n              <>\r\n                <p className={todos[i].completed ? 'done' : null}>{items[i]}</p>\r\n                <button\r\n                  className={s.buttonDone}\r\n                  onClick={() => onToggleCompleted(todos[i].id)}\r\n                  aria-label=\"todo done\"\r\n                >\r\n                  {todos[i].completed ? (\r\n                    <BsArrowCounterclockwise />\r\n                  ) : (\r\n                    <MdDone />\r\n                  )}\r\n                </button>\r\n                <button\r\n                  className={s.buttonDelete}\r\n                  onClick={() => onDeleteTodo(todos[i].id)}\r\n                  aria-label=\"todo delete\"\r\n                >\r\n                  <RiDeleteBack2Line />\r\n                </button>\r\n              </>\r\n            }\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport s from './Container.module.css';\r\n\r\nconst Container = ({ children }) => (\r\n  <div className={s.container}>{children}</div>\r\n);\r\n\r\nexport default Container;\r\n","import { createPortal } from 'react-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default function Modal({ onClose, children }) {\r\n  const handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return window.removeEventListener('keydown', handleKeyDown);\r\n  });\r\n\r\n  const handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className={s.backdrop} onClick={handleBackdropClick}>\r\n      <div className={s.content}>{children}</div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport shortid from 'shortid';\r\nimport { RiAddCircleLine } from 'react-icons/ri';\r\nimport TodoEditor from './components/TodoEditor';\r\nimport DraggableList from './components/DraggableList';\r\nimport Container from './components/Container';\r\nimport Modal from './components/Modal';\r\nimport initialTodos from './todos.json';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  const [todos, setTodos] = useState(initialTodos);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const todos = localStorage.getItem('todos');\r\n    const parsedTodos = JSON.parse(todos);\r\n\r\n    if (parsedTodos) {\r\n      setTodos(parsedTodos);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('todos', JSON.stringify(todos));\r\n  }, [todos]);\r\n\r\n  const addTodo = text => {\r\n    if (text) {\r\n      const todo = {\r\n        id: shortid.generate(),\r\n        text,\r\n        completed: false,\r\n      };\r\n      setTodos([todo, ...todos]);\r\n    }\r\n    toggleModal();\r\n  };\r\n\r\n  const deleteTodo = todoId => {\r\n    console.log(todoId);\r\n    setTodos(todos.filter(todo => todo.id !== todoId));\r\n  };\r\n\r\n  const toggleCompleted = todoId => {\r\n    setTodos(\r\n      todos.map(todo =>\r\n        todo.id === todoId ? { ...todo, completed: !todo.completed } : todo,\r\n      ),\r\n    );\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setShowModal(!showModal);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"head\">\r\n        <h1 className=\"title\">TODOS</h1>\r\n\r\n        <RiAddCircleLine\r\n          className=\"add\"\r\n          onClick={toggleModal}\r\n          aria-label=\"add todo\"\r\n        />\r\n      </div>\r\n      <Container>\r\n        <DraggableList\r\n          todos={todos}\r\n          onDeleteTodo={deleteTodo}\r\n          onToggleCompleted={toggleCompleted}\r\n        />\r\n        {showModal && (\r\n          <Modal onClose={toggleModal}>\r\n            <TodoEditor onSubmit={addTodo} />\r\n          </Modal>\r\n        )}\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// const elem1 = <span>Привет</span>;\r\n// const elem2 = <span>мир</span>;\r\n\r\n// const element = (\r\n//   <div>\r\n//     {elem1}\r\n//     {elem2}\r\n//   </div>\r\n// );\r\n// console.log(element);\r\n\r\n// ReactDOM.render(element, document.querySelector(\"#root\"));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"DraggableList_content__R6iQF\",\"item\":\"DraggableList_item__1OEHW\",\"buttonDelete\":\"DraggableList_buttonDelete__Us7M8\",\"buttonDone\":\"DraggableList_buttonDone__4ko6T\"};"],"sourceRoot":""}